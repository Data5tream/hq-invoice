import{U as I,a as g,k as P,j as b,i as d,u as m,V as z,W as J,d as w,b as j,X as B,e as A,g as ie,w as de,N as pe,Y as D,F as H,m as fe,Z as me,Q as _e}from"./vue.3871716e.js";import{E,C as R,f as K,n as ve,c as be}from"./balm.591669ac.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const ye="modulepreload",he=function(e){return"/hq-invoice/"+e},G={},X=function(u,s,t){return!s||s.length===0?u():Promise.all(s.map(o=>{if(o=he(o),o in G)return;G[o]=!0;const r=o.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":ye,r||(n.as="script",n.crossOrigin=""),n.href=o,document.head.appendChild(n),r)return new Promise((a,l)=>{n.addEventListener("load",a),n.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>u())},ge=e=>(z("data-v-c8fcd579"),e=e(),J(),e),we=ge(()=>w("h2",null,"Einstellungen",-1)),Te=I({__name:"HqConfig",props:{rate:{type:Number,default:10},tax:{type:Number,default:20}},emits:["update:rate","update:tax"],setup(e,{emit:u}){const s=o=>{u("update:rate",Number(o))},t=o=>{u("update:tax",Number(o))};return(o,r)=>(g(),P(m(K),{class:"config-container"},{default:b(()=>[d(m(E),{columns:"12"},{default:b(()=>[we]),_:1}),d(m(E),{columns:"12"},{default:b(()=>[d(m(R),{label:"\u20AC/h",inputType:"number",modelValue:e.rate,"onUpdate:modelValue":s,outlined:""},null,8,["modelValue"])]),_:1}),d(m(E),{columns:"12"},{default:b(()=>[d(m(R),{label:"Steuern (%)",inputType:"number",modelValue:e.tax,"onUpdate:modelValue":t,outlined:""},null,8,["modelValue"])]),_:1})]),_:1}))}});const C=(e,u)=>{const s=e.__vccOpts||e;for(const[t,o]of u)s[t]=o;return s},xe=C(Te,[["__scopeId","data-v-c8fcd579"]]);function Ee(e,u,s=t=>t){const t=Object.create(null);t.options=u||{},t.reviver=s,t.value="",t.entry=[],t.output=[],t.col=1,t.row=1;const o=/"|,|\r\n|\n|\r|[^",\r\n]+/y,r=/^(\r\n|\n|\r)$/;let c=[],n="",a=0;for(;(c=o.exec(e))!==null;)switch(n=c[0],a){case 0:switch(!0){case n==='"':a=3;break;case n===",":a=0,h(t);break;case r.test(n):a=0,h(t),k(t);break;default:t.value+=n,a=2;break}break;case 2:switch(!0){case n===",":a=0,h(t);break;case r.test(n):a=0,h(t),k(t);break;default:throw a=4,Error(`CSVError: Illegal state [row:${t.row}, col:${t.col}]`)}break;case 3:switch(!0){case n==='"':a=4;break;default:a=3,t.value+=n;break}break;case 4:switch(!0){case n==='"':a=3,t.value+=n;break;case n===",":a=0,h(t);break;case r.test(n):a=0,h(t),k(t);break;default:throw Error(`CSVError: Illegal state [row:${t.row}, col:${t.col}]`)}break}return t.entry.length!==0&&(h(t),k(t)),t.output}function h(e){const u=e.options.typed?Oe(e.value):e.value;e.entry.push(e.reviver(u,e.row,e.col)),e.value="",e.col++}function k(e){e.output.push(e.entry),e.entry=[],e.row++,e.col=1}function Oe(e){const u=/.\./;switch(!0){case e==="true":case e==="false":return e==="true";case u.test(e):return parseFloat(e);case isFinite(e):return parseInt(e);default:return e}}const $=e=>Date.parse(`20${e.substring(6,8)}-${e.substring(3,5)}-${e.substring(0,2)} ${e.substring(9,14)}`),ke=e=>{let u="";const s=new Uint8Array(e),t=s.byteLength;for(let c=0;c<t;c++)u+=String.fromCharCode(s[c]);const o=Ee(u),r=o.shift();return JSON.stringify(r)!=='["Projekt","Aufgabe","Beschreibung","Startdatum","Enddatum","Arbeitszeit (hh:mm)"]'?(console.log("format changed!!!"),console.log(r),[]):o.map(c=>({project:c[0],activity:c[1],note:c[2],startTime:$(c[3]),endTime:$(c[3]),duration:($(c[4])-$(c[3]))/36e5}))},$e={class:"hq-upload"},je=I({__name:"HqUpload",emits:["update"],setup(e,{emit:u}){const s=t=>{const o=new FileReader;o.onload=function(r){u("update",ke(r.target.result))},o.readAsArrayBuffer(t[0].sourceFile)};return(t,o)=>(g(),j("div",$e,[d(m(ve),{text:"CSV Datei ausw\xE4hlen",accept:"text/csv",onChange:s})]))}});const Q=C(je,[["__scopeId","data-v-81ae6a56"]]);const Ce={},Y=e=>(z("data-v-01473e11"),e=e(),J(),e),Ne=Y(()=>w("div",null,[w("span",null,"\xA9 Simon Barth, 2022"),w("a",{href:"https://github.com/Data5tream/hq-invoice",target:"_blank",rel:"nofollow"},"Github"),w("span",null,"Licensed under GNU AGPLv3")],-1)),Se=Y(()=>w("span",null,"v0.1.0",-1)),Ae=[Ne,Se];function Pe(e,u){return g(),j("footer",null,Ae)}const Ie=C(Ce,[["render",Pe],["__scopeId","data-v-01473e11"]]),Me=(e,u)=>{const s=[];return e.forEach(t=>{const o=s.find(r=>r.name===t.project);if(o){const r=Number(t.duration.toFixed(2));o.totalTime+=r,o.value+=r*u,o.sets.push(t)}else s.push({name:t.project,totalTime:t.duration,value:t.duration*u,sets:[t]})}),s.sort((t,o)=>t.name===o.name?0:t.name>o.name?1:-1)},Le=I({__name:"App",setup(e){const u=B(()=>X(()=>import("./HqContent.be861d0f.js"),["assets/HqContent.be861d0f.js","assets/HqContent.080859b7.css","assets/util.51cf7948.js","assets/balm.591669ac.js","assets/vue.3871716e.js"])),s=B(()=>X(()=>import("./HqTotals.3099abad.js"),["assets/HqTotals.3099abad.js","assets/HqTotals.d83fc1c4.css","assets/util.51cf7948.js","assets/balm.591669ac.js","assets/vue.3871716e.js"])),t=A(!1),o=A(10),r=A(20),c=ie({raw:[],prepared:[],totals:{hours:0,value:0}}),n=l=>{t.value=!0,c.raw=l,c.prepared=Me(l,o.value),a(o.value)},a=l=>{c.totals.hours=0,c.totals.value=0,c.prepared.forEach(p=>{p.value=p.totalTime*l,c.totals.hours+=p.totalTime,c.totals.value+=p.value})};return de(o,l=>{a(l)}),(l,p)=>(g(),j(H,null,[d(m(be),{contentSelector:"main",navIcon:!1},{default:b(()=>[pe(" HQ Invoice ")]),_:1}),w("main",null,[d(m(K),{class:"app-content"},{default:b(()=>[d(m(E),{columns:"4"},{default:b(()=>[d(xe,{rate:o.value,"onUpdate:rate":p[0]||(p[0]=y=>o.value=y),tax:r.value,"onUpdate:tax":p[1]||(p[1]=y=>r.value=y)},null,8,["rate","tax"]),d(D,{name:"fade"},{default:b(()=>[t.value?(g(),j(H,{key:0},[d(m(s),{totals:c.totals,tax:r.value},null,8,["totals","tax"]),d(Q,{key:"loader",onUpdate:n})],64)):fe("",!0)]),_:1})]),_:1}),d(m(E),{columns:"8"},{default:b(()=>[d(D,{name:"fade"},{default:b(()=>[t.value?(g(),P(m(u),{key:"content",data:c.prepared},null,8,["data"])):(g(),P(Q,{key:"loader",onUpdate:n}))]),_:1})]),_:1})]),_:1})]),d(Ie)],64))}});const Ue=C(Le,[["__scopeId","data-v-8ec992f9"]]);var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ve(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qe(e){var u=e.default;if(typeof u=="function"){var s=function(){return u.apply(this,arguments)};s.prototype=u.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}),s}var ee={exports:{}};(function(e,u){(function(s,t){e.exports=t()})(typeof self<"u"?self:Z,function(){return function(){var s={d:function(n,a){for(var l in a)s.o(a,l)&&!s.o(n,l)&&Object.defineProperty(n,l,{enumerable:!0,get:a[l]})},o:function(n,a){return Object.prototype.hasOwnProperty.call(n,a)}},t={};s.d(t,{default:function(){return c}});const o=/(?:^\[object\s(.*?)\]$)/;var r=n=>Object.prototype.toString.call(n).replace(o,"$1").toLowerCase(),c={name:"copy",beforeMount(n,a){let{value:l}=a;if(r(l)!=="object")throw new Error("[v-copy]: The 'value' must be an object ({ text: string; success: Function; error?: Function })");{const{text:p,success:y,error:O}=l;r(y)!=="function"&&console.warn("[v-copy]: The 'success' must be a function"),n.$value=p,n.handler=()=>{if(!n.$value)return void(O&&O());const _=document.createElement("textarea");_.readOnly="readonly",_.style.position="absolute",_.style.left="-9999px",_.value=n.$value,document.body.appendChild(_),_.select(),document.execCommand("copy")&&y(),document.body.removeChild(_)},n.addEventListener("click",n.handler)}},updated(n,a){let{value:l}=a;n.$value=l.text},unmounted(n){n.removeEventListener("click",n.handler)}};return t=t.default}()})})(ee);const W=ee.exports;var te={exports:{}};const Fe=qe(me);(function(e,u){(function(s,t){e.exports=t(Fe)})(typeof self<"u"?self:Z,function(s){return function(){var t={895:function(n){n.exports=s}},o={};function r(n){var a=o[n];if(a!==void 0)return a.exports;var l=o[n]={exports:{}};return t[n](l,l.exports,r),l.exports}r.d=function(n,a){for(var l in a)r.o(a,l)&&!r.o(n,l)&&Object.defineProperty(n,l,{enumerable:!0,get:a[l]})},r.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var c={};return function(){r.r(c),r.d(c,{default:function(){return se},install:function(){return q},useToast:function(){return ae}});var n=r(895),a=typeof window>"u"?n.createSSRApp:n.createApp;const l=/(?:^\[object\s(.*?)\]$)/;var p=f=>Object.prototype.toString.call(f).replace(l,"$1").toLowerCase();function y(f,i){let v=Object.assign({},f);return p(i)==="string"?v.message="".concat(i):p(i)==="object"&&(v=Object.assign({},v,i)),v}function O(f){return document.getElementById(f)||function(i){const v=document.createElement("div");return v.id=i,document.body.appendChild(v),v}(f)}const _="balmui-toast",T={MIN:2e3,MAX:3500,DEFAULTS:2750},ne={TOP:"top",BOTTOM:"bottom",CENTER:"center"},L={className:"",timeoutMs:T.DEFAULTS,message:"",position:ne.BOTTOM};let N,U,oe,V=L;function re(f){return O(_),a({name:"Toast",expose:["render"],setup(){const i=(0,n.reactive)({open:!1,opening:!0,opened:!1,options:f}),v=(0,n.computed)(()=>["top","center"].includes(i.options.position)?"mdc-toast--".concat(i.options.position):""),ce=(0,n.computed)(()=>["mdc-snackbar","mdc-toast",v.value,i.options.className,{"mdc-snackbar--opening":i.opening,"mdc-snackbar--open":i.opened}]),ue=(0,n.computed)(()=>i.options.message);function le(){i.open=!0,U=setTimeout(()=>{i.open=!1},i.options.timeoutMs)}function F(x){if(!(x.timeoutMs<=T.MAX&&x.timeoutMs>=T.MIN))throw new Error("[$toast]: The timeoutMs of the toast must be between ".concat(T.MIN," and ").concat(T.MAX));i.options=x,le()}return(0,n.watch)(()=>i.open,x=>{x?setTimeout(()=>{i.opened=!0,setTimeout(()=>{i.opening=!1},150)},150):(i.opening=!0,i.opened=!1)}),(0,n.onMounted)(()=>F(f)),{className:ce,message:ue,render:F}},template:`<div :class="className">
  <div class="mdc-snackbar__surface">
    <div class="mdc-snackbar__label" v-text="message"></div>
  </div>
</div>`})}function S(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=y(V,f);N?(clearTimeout(U),clearTimeout(oe),N.render(i)):N=re(i).mount("#".concat(_))}function q(f){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V=Object.assign({},L,i),f.config.globalProperties.$toast=S,f.provide("toast",S)}const ae=()=>S;var se={install:q}}(),c}()})})(te);const Be=Ve(te.exports),M=_e(Ue);M.directive(W.name,W);M.use(Be);M.mount("#app");export{C as _};
